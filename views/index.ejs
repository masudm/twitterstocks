<!DOCTYPE html>
<html>
	<head>
		<style>
			@import url("https://fonts.googleapis.com/css2?family=Lato&display=swap");
			body {
				margin: 0;
				padding: 0;
				font-family: "Lato", sans-serif;
			}

			.header {
				background-color: white;
				height: 5vh;
			}

			.search {
				height: 99%;
				width: 99%;
				border: none;
				font-size: 2em;
				font-family: "Lato", sans-serif;
				outline: none;
				text-align: center;
			}

			.search::placeholder {
				color: rgba(0, 0, 0, 0.1);
				font-style: italic;
			}

			.app {
				background-color: #f4f7f9;
				height: 95vh;
			}

			.stats {
				display: flex;
				flex-direction: row;
				padding-top: 20px;
			}

			.stats .card {
				color: white;
				width: 20%;
				width: calc(20% - 96px);
				margin: 15px;
			}

			.card {
				border-radius: 10px;
				padding: 20px 30px;
			}

			.stats .card:nth-child(1) {
				background-color: #ff5b00;
				margin-left: 30px;
			}
			.stats .card:nth-child(2) {
				background-color: #8f83ff;
			}
			.stats .card:nth-child(3) {
				background-color: #31d9a4;
			}
			.stats .card:nth-child(4) {
				background-color: #fa5291;
			}
			.stats .card:nth-child(5) {
				background-color: #22a8ee;
			}

			.card-title,
			.card-subtitle {
				margin: 0;
				font-weight: bold;
			}

			.small-title,
			.card-subtitle {
				font-size: 0.7em;
			}

			.panel {
				display: flex;
				flex-direction: row;
				padding: 20px 30px;
			}
			.graph {
				width: 60%;
				width: calc(60% - 20px);
				margin-right: 30px;
				background-color: white;
				border-radius: 10px;
				padding: 10px;
			}

			#myChart {
				max-height: 70vh;
			}

			.info {
				width: 40%;
			}

			.info .card {
				background-color: white;
			}

			.name-val {
				display: flex;
				flex-direction: row;
				justify-content: space-between;
				padding: 15px 0;
				border-bottom: 2px solid #eeeeee;
			}

			.info-name {
				color: #c1c1c1;
				font-size: 1.2em;
				margin-top: 3px;
			}

			.info-val {
				font-size: 1.35em;
			}
		</style>
	</head>
	<body>
		<div class="main">
			<div class="header"><input class="search" placeholder="Search here" /></div>
			<div class="app">
				<div class="stats">
					<div class="card">
						<h1 class="card-title"><span class="small-title">$</span><%= quote['05. price'] %></h1>
						<h2 class="card-subtitle">Price</h2>
					</div>
					<div class="card">
						<h1 class="card-title"><span class="small-title">$</span><%= quote['02. open'] %></h1>
						<h2 class="card-subtitle">Open</h2>
					</div>
					<div class="card">
						<h1 class="card-title"><span class="small-title">$</span><%= quote['03. high'] %></h1>
						<h2 class="card-subtitle">High</h2>
					</div>
					<div class="card">
						<h1 class="card-title"><span class="small-title">$</span><%= quote['04. low'] %></h1>
						<h2 class="card-subtitle">Low</h2>
					</div>
					<div class="card">
						<h1 class="card-title"><span class="small-title">$</span><%= quote['08. previous close'] %></h1>
						<h2 class="card-subtitle">Previous Close - <%= quote['07. latest trading day'] %></h2>
					</div>
				</div>
				<div class="panel">
					<div class="graph"><canvas id="myChart"></canvas></div>
					<div class="info">
						<div class="card">
							<h1 class="card-title"><%= info.Symbol %></h1>
							<div class="name-val">
								<div class="info-name">50 Day Moving Average</div>
								<div class="info-val">$<%= info['50DayMovingAverage'] %></div>
							</div>
							<div class="name-val">
								<div class="info-name">52 Week High</div>
								<div class="info-val">$<%= info['52WeekHigh'] %></div>
							</div>
							<div class="name-val">
								<div class="info-name">52 Week Low</div>
								<div class="info-val">$<%= info['52WeekLow'] %></div>
							</div>
							<div class="name-val">
								<div class="info-name">Analyst Target Price</div>
								<div class="info-val">$<%= info.AnalystTargetPrice %></div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.bundle.min.js"></script>
		<script>
			let info = <%- JSON.stringify(info) %>;
			let data = <%- JSON.stringify(data) %>;
			let quote = <%- JSON.stringify(quote) %>;
			console.log(info);

			var ctx = document.getElementById("myChart").getContext("2d");
			var chart = new Chart(ctx, {
				type: "line",
				data: {
					datasets: [
						{
							data: data,
							borderColor: '#22A8EE',
							backgroundColor: 'rgba(34,168,238,0.1)',
							pointBorderColor: 'rgba(0,0,0,0)'
						},
					],
				},
				options: {
					scales: {
						xAxes: [
							{
								type: "time",
								position: "bottom",
								gridLines: {
									display: false
								}
							},
						],
						yAxes: [
							{
								gridLines: {
									display: true
								}
							}
						],
						ticks: {

						}
					},
					legend: {
						display: false
					}
				},

			});
		</script>
	</body>
</html>
